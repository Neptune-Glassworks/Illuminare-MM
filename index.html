<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Illuminare Mind Map</title>
  <script src="https://unpkg.com/cytoscape@3.26.0/dist/cytoscape.min.js"></script>
  <!-- 1) Load the font first -->
  <link
    href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap"
    rel="stylesheet"
  />
  
  <style>
    /* 1) Base resets & default gradient */
    html, body {
      margin: 0;
      padding: 0;
      height: auto;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      background: linear-gradient(to bottom, #2A2A2A, #1F1F1F);
    }

    /* 2) Blend‐mode overlay */
    @supports (background-blend-mode: overlay) {
      html, body {
        background-image:
          url('paper_texture.png'),
          linear-gradient(to bottom, #2A2A2A, #1F1F1F);
        background-repeat: repeat, no-repeat;
        background-size: auto, cover;
        background-blend-mode: overlay;
      }
    }

    /* renamed container for cytoscape + legend positioning */
    #wrapper {
      width: 100%;
      height: auto;
      position: relative;
      padding-bottom: 40vh; /* allow page to scroll */
    }

    /* the actual graph viewport */
    #cy {
      width: 100%;
      height: 100vh;
      pointer-events: auto;
    }
  </style>
</head>
<body>
  <!-- renamed this ID so JS that does getElementById('wrapper') will succeed -->
  <div id="wrapper">
    <div id="cy"></div>
  </div>

  <script>
    fetch('data/neptune_theme_network_classified.json')
      .then(res => res.json())
      .then(data => {

        const cy = cytoscape({
          container: document.getElementById('cy'),
          elements: data.elements,

          style: [
            {
              selector: 'node.theme',
              style: {
                'background-color': '#1B2A22',
                'label': 'data(name)',
                'font-family': 'DM Sans, sans-serif',
                'font-size': 32,
                'text-valign': 'center',
                'color': '#FFF',
                'text-outline-color': '#1F1F1F',
                'text-outline-width': 0.5,
                'width': 46,
                'height': 46
              }
            },
            {
              selector: '.glow-ring',
              style: {
                'background-color': '#FFD700',
                'opacity': 0.25,
                'width': 20,
                'height': 20,
                'z-index': 0,
                'shape': 'ellipse',
                'events': 'no',
                'label': ''
              }
            },
            {
              selector: 'node.lamp.chandelier',
              style: { 'background-color': '#F5F1E8', 'width': 25, 'height': 25 }
            },
            {
              selector: 'node.lamp.pendant',
              style: { 'background-color': '#7E9BAE', 'width': 25, 'height': 25 }
            },
            {
              selector: 'node.lamp.sconce',
              style: { 'background-color': '#D9BCA3', 'width': 25, 'height': 25 }
            },
            {
              selector: 'node.lamp.table',
              style: { 'background-color': '#E6C4C9', 'width': 25, 'height': 25 }
            },
            {
              selector: 'node.lamp.floor',
              style: { 'background-color': '#A5A77B', 'width': 25, 'height': 25 }
            },
            {
              selector: 'node.lamp.outdoor',
              style: { 'background-color': '#B7D1C5', 'width': 25, 'height': 25 }
            },
            {
              selector: 'node',
              style: {
                'label': 'data(name)',
                'font-family': 'DM Sans, sans-serif',
                'font-size': 20,
                'text-valign': 'center',
                'color': '#FFF',
                'text-outline-color': '#1F1F1F',
                'text-outline-width': 0.5
              }
            },
            {
              selector: 'edge',
              style: {
                'width': 1.5,
                'line-color': '#E1E7ED',
                'line-style': 'dashed',
                'opacity': 0.5,
                'line-dash-pattern': [6, 4],
                'curve-style': 'unbundled-bezier',
                'edge-distances': 'node-position',
                'control-point-distances': 0,
                'control-point-weights': 0.5
              }
            },
            {
              selector: 'edge.highlighted-edge',
              style: { 'opacity': 1 }
            }
          ],

          layout: { name: 'preset' },

          // KEEP THESE EXACTLY AS IS:
          userZoomingEnabled: false,
          wheelSensitivity: 0.2
        });

        // …rest of your interaction & animation code…

      });
  </script>
</body>
</html>
